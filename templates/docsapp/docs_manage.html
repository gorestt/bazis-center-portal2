{% extends 'base.html' %}
{% block title %}Управление документацией{% endblock %}
{% block content %}
<h1 class="mb-4">Управление документацией</h1>
<div class="row">
  <div class="col-md-5">
    <form method="post" enctype="multipart/form-data" class="card card-body">
      {% csrf_token %}
      <div class="mb-3">
        <label class="form-label">Название</label>
        {{ form.title }}
      </div>
      <div class="mb-3">
        <label class="form-label">Слаг</label>
        {{ form.slug }}
      </div>
      <div class="mb-3">
        <label class="form-label">Описание</label>
        {{ form.description }}
      </div>
      <div class="mb-3">
        <label class="form-label">Файл</label>
        {{ form.file }}
      </div>
      <div class="mb-3">
        <label class="form-label">Доступ</label>
        {{ form.access }}
      </div>
      <button type="submit" class="btn btn-primary">Добавить документ</button>
    </form>
  </div>
  <div class="col-md-7">
    <h5>Список документов</h5>
    <table class="table table-sm table-striped align-middle">
      <thead class="table-light">
        <tr>
          <th>Название</th>
          <th>Доступ</th>
          <th>Файл</th>
        </tr>
      </thead>
      <tbody>
        {% for d in docs %}
        <tr>
          <td>{{ d.title }}</td>
          <td>{{ d.get_access_display }}</td>
          <td>
            {% if d.file %}
              <a href="{{ d.file.url }}" download>{{ d.file.name|cut:"docs/" }}</a>
            {% else %}
              <span class="text-muted">нет файла</span>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="3" class="text-muted">Документов нет.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
